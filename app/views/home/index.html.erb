<h1>Async Job</h1>

<p>This is a simple example of how to use the async job gem. You can use the form below to submit a job to the queue. The job will be executed in the background and the results will be displayed in the table below.</p>

<form action="/execute" method="post">
	<select name="queue">
		<% Rails.application.config.async_job.definitions.each do |name, _| %>
		<option value="<%= name %>"><%= name %></option>
		<% end %>
	</select>
	<input type="submit" value="Submit" />
</form>

<h2>Job Executions</h2>
<%= turbo_stream_from "job_executions" %>

<table>
	<thead>
		<tr>
			<th>ID</th>
			<th>Name</th>
			<th>Data</th>
		</tr>
	</thead>
	<tbody id="job_executions">
		<%= render @job_executions %>
	</tbody>
</table>
